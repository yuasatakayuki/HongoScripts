<html>
<body>
<pre>
#!/bin/bash

#20130723 Takayuki Yuasa

if [ _$2 = _ ]; then
cat &lt;&lt; EOF
give the following arguments:
  1: a relative path to suzaku data folder (e.g. ../../data/408018020).
  2: output file name (e.g pinEarthOccultation.evt)
EOF
exit
fi

eventUFDir=$1/hxd/event_uf

if [ ! -d $1 ]; then
echo &quot;$1 is not found...&quot;
exit
fi

if [ ! -d $eventUFDir ]; then
echo &quot;hxd event_uf folder is not found.&quot;
exit
fi

outputFile=$2

#
# detType
#  0 = gso
#  1 = pin
#  2 = pseudo
#
detType=2

eventFileList=`<span style="text-decoration:line-through;color:blue;">get_hash_random.pl</span><span style="color:red;">hsHashRandom</span>`

echo &quot;Creatint a unfiltered event file list...&quot;
ls $eventUFDir/ae*hxd*wel_uf* &gt; $eventFileList
cat $eventFileList

rm -f $outputFile

echo &quot;---------------------------------------------&quot;
echo &quot;Filtering with XSELECT&quot;
echo &quot;---------------------------------------------&quot;
xselect &lt;&lt; EOF

read event @$eventFileList ./
read hk
.
$ehkFile

filter column &quot;DET_TYPE=$detType:$detType&quot;
filter hk 
SAA_HXD==0 &amp;&amp; T_SAA_HXD&gt;500 &amp;&amp; TN_SAA_HXD&gt;180 &amp;&amp; COR&gt;6

extract event

save event $outputFile
n
exit

EOF

rm $eventFileList
</pre>
</body>
</html>
