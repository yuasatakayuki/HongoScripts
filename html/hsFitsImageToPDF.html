<html>
<body>
<pre>
#!/bin/bash

#20090313 Takayuki Yuasa

if [ _$2 = _ ];
then
echo &quot;<span style="text-decoration:line-through;color:blue;">fits_image_to_pdf.sh</span><span style="color:red;">hsFitsImageToPDF</span> (input fits image file) (output pdf filename) (&quot;radec&quot;;optional)&quot;
exit
fi

inputfile=$1
outputfile=$2

if [ _$3 = _radec ];
then
coordinate=fk5
else
coordinate=galactic
fi

tiff=`<span style="text-decoration:line-through;color:blue;">get_hash_random.pl</span><span style="color:red;">hsHashRandom</span>`.tiff
gif=`<span style="text-decoration:line-through;color:blue;">get_hash_random.pl</span><span style="color:red;">hsHashRandom</span>`.gif
region=`<span style="text-decoration:line-through;color:blue;">get_hash_random.pl</span><span style="color:red;">hsHashRandom</span>`.reg

if [ `<span style="text-decoration:line-through;color:blue;">indexof.pl</span><span style="color:red;">hsStringIndex</span> &quot;$inputfile&quot; &quot;xis&quot;` &gt; -1 ];
then
<span style="text-decoration:line-through;color:blue;">xis_create_detector_region.sh</span><span style="color:red;">hsXISCreateDetectorRegion</span> $inputfile $region
tmp=`<span style="text-decoration:line-through;color:blue;">get_hash_random.pl</span><span style="color:red;">hsHashRandom</span>`
exposure=`<span style="text-decoration:line-through;color:blue;">exposure.sh</span><span style="color:red;">hsGetFitsExposure</span> $inputfile`
exposureks=`calc $exposure/1000`
title=&quot;XIS `<span style="text-decoration:line-through;color:blue;">targetname.sh</span><span style="color:red;">hsFitsGetTargetName</span> $inputfile` $exposureks&quot;ks
sed -e &quot;s/XIS/$title/g&quot; $region &gt; $tmp
mv $tmp $region
regionoption=&quot;-region $region&quot;
else
regionoption=&quot;&quot;
fi



ds9 -geometry 500x500+10+10 $inputfile $regionoption \
-view info np -view panner no -view magnifier no \
-view buttons no -width 512 -height 512 \
-zoom to fit -cmap grey -cmap invert yes \
-grid yes -grid system wcs -grid sky $coordinate \
-grid skyformat degrees -grid view grid yes \
-grid view axes numbers yes -grid view axes yes \
-grid type numerics interior -grid type publication \
-height 550 \
-saveimage tiff $tiff -quit

if [ -f $tiff ];
then
convert $tiff $gif
convert $gif $outputfile
fi
rm -f $tiff $gif $region
</pre>
</body>
</html>
