<html>
<body>
<pre>
#!/usr/bin/env ruby

#2013-08-28 Takayuki Yuasa updated to use Ruby

if(ARGV!=nil and ARGV.count(&quot;-h&quot;)!=0)then
puts &lt;&lt;EOS
This script creates an HTML code which lists hyper links
for downloading files specified as arguments. Save the
output as &quot;index.html&quot; for example.
EOS
exit
end

folderName=`pwd`
folderName=`basename #{folderName}`

creationDate=`date +&#39;%Y-%m-%d %H:%M&#39;`

puts &lt;&lt;EOS
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Index&lt;/title&gt;&lt;/head&gt;
&lt;!DOCTYPE html&gt;
&lt;meta charset=&quot;UTF-8&quot;&gt;
&lt;style type=&quot;text/css&quot;&gt;  
body{
	background: white;
	font-family: &#39;HelveticaNeue-Light&#39;, &#39;Lucida Grande&#39;,
 &#39;Hiragino Kaku Gothic ProN&#39;, &#39;ヒラギノ角ゴ ProN W3&#39;,
 Meiryo, メイリオ, sans-serif;
	size: 11pt;
}
h2{
	font-size: 20pt;
}
a{
	color: #f06;
	text-decoration:none;
	font-weight: bold;
}
ul li { list-style-type: circle; }
table {
	border:none;
	margin-left: 20px;
}
td{
	padding: 5px 30px 5px 5px;
}
.small{
	font-size:10pt;
}
&lt;/style&gt;  
&lt;body&gt;
&lt;h2&gt;Index of #{folderName}&lt;/h2&gt;
&lt;table&gt;
EOS

fileList=[]
if(ARGV!=nil)then
 fileList=ARGV
else
 fileList=Dir::glob(&quot;*&quot;)
end

for file in fileList do
if (file != &quot;index.html&quot; and File.exist?(file)) then
	fileSize=`du -h &quot;#{file}&quot; | awk &#39;{print $1}&#39;`
	fileSize.chomp!()
	updateDateTime=File.mtime(file).strftime(&quot;%Y-%m-%d %H:%M:%S&quot;)
puts &lt;&lt;EOS
	&lt;tr&gt;
	&lt;td&gt;
		&lt;a href=&quot;#{file}&quot;&gt;#{file}&lt;/a&gt;
	&lt;/td&gt;
	&lt;td&gt;#{updateDateTime}&lt;/td&gt;
	&lt;td&gt;#{fileSize}&lt;/td&gt;
	&lt;/tr&gt;
EOS
end
end


puts &lt;&lt;EOS
&lt;/table&gt;
&lt;p class=&quot;small&quot;&gt;
Note: This index was generated on #{creationDate} by
&lt;a href=&quot;https://github.com/yuasatakayuki/WorkScripts/blob/master/bin/<span style="text-decoration:line-through;color:blue;">wsHTMLCreateIndexFileOfFiles</span><span style="color:red;">hsHTMLCreateIndexFileOfFiles</span>&quot;&gt;<span style="text-decoration:line-through;color:blue;">wsHTMLCreateIndexFileOfFiles</span><span style="color:red;">hsHTMLCreateIndexFileOfFiles</span>&lt;/a&gt; contained in &lt;a href=&quot;https://github.com/yuasatakayuki/WorkScripts&quot;&gt;WorkScripts&lt;/a&gt;.
&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
EOS
</pre>
</body>
</html>
