<html>
<body>
<pre>
#!/bin/bash

#20090316 Takayuki Yuasa
#20090512 Takayuki Yuasa automatic cpd insertion
#20090526 Takayuki Yuasa cpd deleted (xspec no window mode)

if [ _${9} = _ ];
then
cat &lt;&lt; EOF
<span style="text-decoration:line-through;color:blue;">suzaku_create_xcm_simultaneous_xis_pin_plot.sh</span><span style="color:red;">hsSuzakuCreateXCMOfXISAndPINPlotting</span> \\
 (XIS event pi file) \\
 (XIS bgd pi file; or none) \\
 (XIS response file) \\
 (XIS auxiliary response file; or none) \\
 (PIN event pi file) \\
 (PIN nxb pi file; or none) \\
 (PIN response file) \\
 (PIN arf file) \\
 (output xcm filename)
EOF
exit
fi

pwd=`pwd`
if [ `basename $pwd` != simultaneous ];
then
echo &quot;please execute this command inside &#39;analysis/simultaneous&#39; folder&quot;
exit
fi

#parameter set
xisevtfile=$1
xisbgdfile=$2
xisrmf=$3
xisarf=$4

pinevtfile=$5
pinnxbfile=$6
pinrmf=${7}
pinarf=${8}

outputfile=${9}

#xspec nowindow mode
export PGPLOT_TYPE=&quot;&quot;


mkdir -p `dirname $outputfile` &amp;&gt; /dev/null

ruby &lt;&lt; EOF &gt; $outputfile
#xis part
dataarray=[&quot;$xisevtfile&quot;]
bgdarray=[&quot;$xisbgdfile&quot;]
resparray=[&quot;$xisrmf&quot;]
arfarray=[&quot;$xisarf&quot;]

#pin part
dataarray+=[&quot;$pinevtfile&quot;]
bgdarray+=[&quot;$pinnxbfile&quot;]
resparray+=[&quot;$pinrmf&quot;]
arfarray+=[&quot;$pinarf&quot;]

datanumber=1
dataarray.each { |line|
 print &quot;data #{datanumber}:#{datanumber} #{line}\n&quot;
 datanumber=datanumber+1
}

print &lt;&lt;EOS 
response #{resparray.join(&#39; &#39;)}
backgrnd #{bgdarray.join(&#39; &#39;)}
arf #{arfarray.join(&#39; &#39;)}

setplot energy
EOS

print &lt;&lt;EOS
ignore 1:**-0.5 9.-**
setplot rebin 10,10,1

ignore 2:**-12. 50.-**
setplot rebin 5,10,2

plot ldata

EOS

EOF


</pre>
</body>
</html>
