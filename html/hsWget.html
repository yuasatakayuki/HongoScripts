<html>
<body>
<pre>
#!/usr/bin/env ruby

#2013-08-30 Takayuki Yuasa

if(ARGV.length==0)then
	puts &lt;&lt;EOS
A wget wrapper that reads a list of urls from a specified file.
Options:
  --hostdir : creates host directory.
  --cut=n   : cuts n directories when saving.
EOS
exit
end

options=[]
specifiedOptions=[]
ARGV.each(){|e|
 if(e.include?(&quot;--cut=&quot;))then
  options &lt;&lt; &quot;-nH --cut-dirs=#{e.gsub(&quot;cut=&quot;,&quot;&quot;)}&quot;
  specifiedOptions &lt;&lt; e
 end
 if(e.include?(&quot;--hostdir&quot;))then
  options &lt;&lt; &quot;-x&quot;
  specifiedOptions &lt;&lt; e
 end
}

puts options

for e in specifiedOptions do
 ARGV.delete(e)
end

open(ARGV[0]).each(){|e|
	if(e.chomp()!=&quot;&quot;)then
		`wget #{options.join(&quot; &quot;)} #{e}`
	end
}
</pre>
</body>
</html>
