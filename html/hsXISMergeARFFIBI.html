<html>
<body>
<pre>
#!/bin/bash

#20090318 Takayuki Yuasa
#20090608 Takayuki Yuasa suppress message when deleting old arf

if [ _$1 = _ ];
then

echo &quot;<span style="text-decoration:line-through;color:blue;">xis_merge_arfs_fibi.sh</span><span style="color:red;">hsXISMergeARFFIBI</span> (region file)&quot;
echo &quot;note:(region file) should be a region filename which was used to create ARFs to be merged.&quot;
echo &quot;FI ARF are created merging exisisting FI ARFs. XIS1 ARF is linked as BI ARF.&quot;
echo &quot;output file is fi_(basename &#39;region file&#39; .reg).arf&quot;
exit
fi

regionfile=$1
regionname=`basename $regionfile .reg`

files=`ls arfs/xis0_${regionname}.arf arfs/xis2_${regionname}.arf arfs/xis3_${regionname}.arf 2&gt; /dev/null`
filelist=`ruby -e &quot;print ARGV.join(&#39;,&#39;)&quot; $files`
ratio=`ruby -e &quot;a=[];ARGV.each { a+=[1]; }; print a.join(&#39;,&#39;);&quot; $files`
outputfile=arfs/fi_${regionname}.arf
logfile=${outputfile}.log

#FI
echo &quot;filelist:$filelist&quot; 2&gt;&amp;1 | tee -a $logfile
echo &quot;ratio:$ratio&quot; 2&gt;&amp;1 | tee -a $logfile
echo &quot;outputfile:$outputfile&quot; 2&gt;&amp;1 | tee -a $logfile
rm -r $outputfile &amp;&gt; /dev/null
addarf $filelist $ratio $outputfile 2&gt;&amp;1 | tee -a $logfile

#BI
cd arfs/
ln -sf xis1_${regionname}.arf bi_${regionname}.arf
cd - &amp;&gt; /dev/null
</pre>
</body>
</html>
