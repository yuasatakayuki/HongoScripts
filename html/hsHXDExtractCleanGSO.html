<html>
<body>
<pre>
#!/bin/sh 


# reprocess HXD unscreened files
# must be done in event_uf_repro/

pincl=`ls ../event_cl/ae*pinno_cl.evt`
pinfile=`basename $pincl`

rm -f $pinfile
ln -s $pincl .

# create pin gtifile
rm -f pin.gti
mgtime &quot;$pinfile[2],$pinfile[2]&quot; pin.gti AND


ufevt=`ls ae*hxd_0_wel*.evt`
clevt=`basename $ufevt _wel_uf.evt`_gsono_cl.evt

rm -f *.xsl $clevt
 
xselect &lt;&lt; EOF  2&gt;&amp;1 | tee HS_extract_cleanGSO_$$.log


read event &quot;$ufevt&quot; ./

filter time file pin.gti
filter column &quot;DET_TYPE=0:0&quot;

show filter

extract event

save event
$clevt


exit


EOF



fparkey fitsfile=&quot;${clevt}+0&quot; \
      value=&quot;WELL_GSO&quot; keyword=&quot;DETNAM&quot; comm=&quot;detector name&quot; add=no
fparkey fitsfile=&quot;${clevt}+1&quot; \
      value=&quot;WELL_GSO&quot; keyword=&quot;DETNAM&quot; comm=&quot;detector name&quot; add=no


fkeyprint infile= &quot;../event_cl/${clevt}&quot; keynam=&quot;TIMEDEL&quot; &gt; fkeytmp$$.log
timedel=( `awk &#39;(/TIMEDEL =/) {print $3}&#39; fkeytmp$$.log` )

fparkey fitsfile=&quot;${clevt}+0&quot; \
      value=&quot;${timedel[1]}&quot; keyword=&quot;TIMEDEL&quot; \
      comm=&quot;finest time resolution (time between frames)&quot; add=no

fparkey fitsfile=&quot;${clevt}+1&quot; \
      value=&quot;${timedel[1]}&quot; keyword=&quot;TIMEDEL&quot; \
      comm=&quot;finest time resolution (time between frames)&quot; add=no
</pre>
</body>
</html>
