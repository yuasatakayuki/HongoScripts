<html>
<body>
<pre>
#!/usr/bin/env ruby

#20140203 Takayuki Yuasa

require &quot;RubyFits&quot;
include Fits

# Open apec-resulting FITS files
#lineFile=FitsFile.open(&quot;apec_line.fits&quot;)
#cocoFile=FitsFile.open(&quot;apec_coco.fits&quot;)

#parametersHDU=lineFile[0]

filename=&quot;apec_line.fits&quot;

# Calculation parameters
keywords = { 
	&quot;Continuum calculation&quot; =&gt; 
		{ &quot;HIERARCH SBREMS_TYPE&quot; =&gt; &quot;Bremss type&quot; },
	&quot;Spectral calculation&quot; =&gt;
		{
			&quot;INUM_E&quot; =&gt; &quot;Number of energy bins&quot;, 
			&quot;DE_START&quot; =&gt; &quot;Lowest energy&quot;,
			&quot;DE_END&quot; =&gt; &quot;Highest energy&quot;,
		},
	&quot;Densities&quot; =&gt;
		{
			&quot;HIERARCH INUM_DENSITIES&quot; =&gt; &quot;Number of density grid&quot;,
			&quot;HIERARCH DDENSITY_START&quot; =&gt; &quot;Log10 (start density)&quot;,
			&quot;HIERARCH DDENSITY_STEP&quot; =&gt; &quot;Log10 (density step)&quot;
		},
	&quot;Temperatures&quot; =&gt;
		{
			&quot;HIERARCH INUM_TEMP&quot; =&gt; &quot;Number of temperatures&quot;,
			&quot;HIERARCH DTEMP_START&quot; =&gt; &quot;Log10 (start temperature)&quot;,
			&quot;HIERARCH DTEMP_STEP&quot; =&gt; &quot;Log10 (temperature step)&quot;
		}
	}


# Get and dump header entries
keywords.each(){|category,keyTitleMap|
	puts &quot;## #{category}&quot;
	puts &quot;&quot;
	keyTitleMap.each(){|key,title|
		#key=key.gsub(&quot;HIERARCH &quot;,&quot;&quot;)
		value=`fkeyprint #{filename}+0 &quot;#{key}&quot; 2&gt;/dev/null | grep &quot;=&quot; | grep &quot;#{key.split(&quot; &quot;)[-1]}&quot; | tail -1 | sed -e &quot;s/&#39;//g&quot;`
		if(value!=nil)then
			value=value.split(&quot;=&quot;)[1]
		end
		if(value!=nil)then
			value=value.split(&quot;/&quot;)[0]
		end
		if(value!=nil)then
			value.strip!()
		end
		puts &quot;- #{title}: #{value}&quot;
	}
	puts &quot;&quot;
}


# Close files
#lineFile.close()
#cocoFile.close()
</pre>
</body>
</html>
