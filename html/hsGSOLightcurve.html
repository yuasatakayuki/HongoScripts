<html>
<body>
<pre>
 #!/bin/bash

#20090510 Shinya Yamada
#20090527 Takayuki Yuasa change to accept extra condition

pwd=`pwd`
if [ `basename $pwd` != lightcurve_analysis ];
then
echo &quot;run this script at analysis/gso/lightcurve_analysis/ folder.&quot;
exit
fi

if [ _$1 != _ ];
then
if [ -f $1 ];
then
extraconditionfile=$1
echo &quot;Extra condition file $extraconditionfile is used&quot;
else
echo &quot;Extra condition file $extraconditionfile not found...exit&quot;
exit
fi
fi

read -p &quot;input tag name &gt; &quot; tag
# display before input


if [ _$tag = _ ];
then
echo &quot;tag name empty...exit&quot;
exit
fi


mkdir lcfiles/${tag} &amp;&gt; /dev/null
mkdir gtis/${tag} &amp;&gt; /dev/null


#merge gtis
<span style="text-decoration:line-through;color:blue;">pin_merge_gtis.sh</span><span style="color:red;">hsPINMergeGTI</span> \
../data/gso_evt.evt+2 \
../data/gso_nxb.evt+2 \
gtis/${tag}/cleaned_evt_nxb_merged.gti


for binsize in 1000;
#for binsize in 100 300 600 900;
do

<span style="text-decoration:line-through;color:blue;">gso_extract_lightcurve_with_gti.sh</span><span style="color:red;">hsGSOExtractLightcurveWithGTI</span> \
../data/gso_evt.evt \
../data/gso_nxb.evt \
../data/pseudo.evt \
gtis/${tag}/cleaned_evt_nxb_merged.gti \
lcfiles/${tag}/gso_evt ${binsize} $extraconditionfile

<span style="text-decoration:line-through;color:blue;">gso_lightcurve_correct_deadtime_and_nxb.sh</span><span style="color:red;">hsGSOCorrectLightcurveWithDeadtimeAndNXB</span> \
lcfiles/${tag}/gso_evt_evt_bin${binsize}.lc \
lcfiles/${tag}/gso_evt_nxb_bin${binsize}.lc \
lcfiles/${tag}/gso_evt_pse_bin${binsize}.lc \
lcfiles/${tag}/gso_evt_bin${binsize}_corrected_for_dt_nxb \
../auxil/ae*.ehk

done
</pre>
</body>
</html>
