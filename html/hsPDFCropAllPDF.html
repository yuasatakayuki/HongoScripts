<html>
<body>
<pre>
#!/bin/bash

#20140407 Takayuki Yuasa

#--
#programName: <span style="text-decoration:line-through;color:blue;">pdfcropall</span><span style="color:red;">hsPDFCropAllPDF</span>
#author: Takayuki Yuasa
#summary: Crops pdf files in the current directory using pdfcrop in the TeX Live package. 
#detail: To increase processing speed, this script executes multiple pdfcrop processes simultaneously.
#  The maximum number of threads to be executed can be configured via NMaxThreads in the script.
#  The defail NMaxThreads is 8.
#required: pdfcrop
#argument: none
#/--

NMaxThreads=8
nThreads=0

for file in `ls *.pdf`; do

pdfcrop $file $file &amp;
nThreads = `calc $nThreads + 1`

if [ $nThreads = $NMaxThreads ]; then
echo &quot;Waiting...&quot;
wait
nThreads=0
fi

done

echo &quot;Waiting...&quot;
wait

echo &quot;Completed.&quot;
</pre>
</body>
</html>
