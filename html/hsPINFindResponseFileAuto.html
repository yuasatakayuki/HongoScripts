<html>
<body>
<pre>
#!/bin/bash

#20090305 Takayuki Yuasa

#This script finds appropriate response
#file for a PIN spectrum from CALDB automatically.

if [ _$1 = _ ];
then
echo &quot;usage : <span style="text-decoration:line-through;color:blue;">pin_find_responsefile_auto.sh</span><span style="color:red;">hsPINFindResponseFileAuto</span> (target file; e.g. PIN spectrum file)&quot;
exit
fi

infile=$1

nominal=`<span style="text-decoration:line-through;color:blue;">getheader.sh</span><span style="color:red;">hsFitsGetHeader</span> $1 0 NOM_PNT`
epoch=`<span style="text-decoration:line-through;color:blue;">pin_get_epoch_of.sh</span><span style="color:red;">hsPINGetEpoch</span> $1`

if [ _$CALDB = _ -o ! -d $CALDB ];
then
echo &quot;please set CALDB environmental variable&quot;
echo &quot;also, please check if CALDB is truely located there&quot;
echo &quot;e.g. export CALDB=/net/suzaku/process/caldb/2008-10-20&quot;
exit
fi

if [ _$nominal = _&#39;HXD&#39; ];
then
nom=hxnom
else
nom=xinom
fi

hxdcpf=${CALDB}/data/suzaku/hxd/cpf/
response=`ls $hxdcpf/ae_hxd_pin${nom}e${epoch}*rsp | tail -1`

if [ ! -f $response ];
then
echo &quot;No response file was found in $hxdcpf&quot;
exit
fi

echo $response
</pre>
</body>
</html>
