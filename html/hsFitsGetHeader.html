<html>
<body>
<pre>
#!/bin/bash

#20100718 Takayuki Yuasa updated for simultaneous multiple-process execution 
#20110122 Takayuki Yuasa modified to use fkeyprint
#20110124 Takayuki Yuasa branch for string/number

if [ _$3 = _ ];
then
echo &quot;usage <span style="text-decoration:line-through;color:blue;">getheader.sh</span><span style="color:red;">hsFitsGetHeader</span> file extension keyword&quot;
exit
fi

file=$1
ext=$2
keyword=`ruby -e &quot;print &#39;$3&#39;.downcase&quot;`

if [ ! -f $file ]; then
exit
fi

ruby &lt;&lt; EOF
str= &#39;`fkeyprint ${file}+$ext $keyword exact=yes 2&gt;/dev/null | grep &quot;=&quot; | tail -1 | sed -e &quot;s/&#39;//g&quot;`&#39;
if(str.include?(&quot;&#39;&quot;))then
	#string
	a=str.split(&quot;&#39;&quot;)
	print a[1].strip
else
	if(str.include?(&quot;=&quot;))then
		#number etc
		print str.split(&quot;=&quot;)[1].split(&quot;/&quot;)[0].strip
	end
end
EOF
</pre>
</body>
</html>
